{% macro rating_widget(release, selected, class) -%}
    <ol class="{{ class if class else '' }} rating">
    {% for n in range(8, 0, -1) %}
        <li {{ 'class=selected' if n == selected }} onclick='rateRelease(this, {{ release.id }}, {{ n }});'>{{ n }}</li>
    {% endfor %}
    </ol>
{%- endmacro %}

{% macro release_list(releases) -%}
    <ol class="releases">
    {% for release in releases | sort(attribute="date") %}
        <li>
            <h2><time>{{ release.date[:4] }}</time> <a href={{ release.url }}>{{ release.title }}</a></h2>
        </li>
    {% endfor %}
    </ol>
{%- endmacro %}

{% macro release_grid(releases, user=None, class=None, artist_not_date=False) -%}
    <ol class="releases grid {{ class if class else '' }}">
    {% for release in releases | sort(attribute="date") %}
        <li>
            {{ rating_widget(release, user.ratings[release.id] if user and release.id in user.ratings, "inset small") }}
            <a href={{ release.url }}>
                <div><img src="{{ release.thumb_art_url if release.thumb_art_url else 'http://www.howwe.biz/no-cover.png' }}" /></div>
                <span class="title">
                    {% if artist_not_date %}
                        <strong>{{ release.title }}</strong><br/>
                        {% for artist in release.get_artists() %}
                            <span class="author">{{ artist.name }}</span>
                        {% endfor %}
                    {% else %}
                        {{ release.title }}<br/>{{ release.date[:4] }}
                    {% endif %}
                </span>
            </a>
        </li>
    {% endfor %}
    </ol>
{%- endmacro %}
