{% extends "layout.html" %}

{% macro release_list(releases) -%}
    <ol class="releases">
    {% for release in releases | sort(attribute="date") %}
        <li>
            <h2>{{ release.date[:4] }} <a href="{{ release.slug }}">{{ release.title }}</a></h2>
        </li>
    {% endfor %}
    </ol>
{%- endmacro %}

{% block title %}{{ artist.name }} {{ super() }}{% endblock %}

{% block content %}
<section>
	<header><h1>{{ artist.name }}</h1></header>
	
	<p>Kevin Shields and co. blended ethereal melodies with discordant sounds to become one of the prime influences on the late-'80s indie scene.</p>
	
    <h3>Albums</h3>
    {{ release_list(artist.releases | selectattr("reltype", "equalto", "Album")) }}
    
    <br/><h3>Other releases</h3>
    {{ release_list(artist.releases | rejectattr("reltype", "equalto", "Album")) }}
</section>
{% endblock %}